## ОП Python / 7.Модули и библиотеки

### 7.1 Импортирование модулей

В Python модуль - это файл с расширением .py, содержащий функции, классы и переменные для повторного использования в других программах. Чтобы использовать функции из модуля, его нужно импортировать в свою программу.

Для импортирования модуля в Python используется ключевое слово `import`, за которым идет название модуля. Например, для импорта модуля math, содержащего математические функции, нужно написать:

```python
import math
```

После этого все функции и переменные из модуля math будут доступны в программе. Для вызова функции из модуля нужно указать название модуля и функции через точку:

```python
import math

print(math.pi)
# Выведет значение числа пи

print(math.sqrt(25))
# Выведет квадратный корень из 25 (5)
```

Можно также импортировать отдельные функции или переменные из модуля:

```python
from math import pi, sqrt

print(pi)
# Выведет значение числа пи

print(sqrt(25))
# Выведет квадратный корень из 25 (5)
```

_В этом случае названия функций и переменных импортируются в основную программу напрямую, без указания названия модуля._

Можно также задать псевдоним для модуля или импортированных функций, используя ключевое слово `as`:

```python
import math as m

print(m.pi)
# Выведет значение числа пи

from math import sqrt as sq

print(sq(25))
# Выведет квадратный корень из 25 (5)
```

### 7.2 Стандартные модули Python

Python поставляется со множеством стандартных модулей, реализующих разные функции. Некоторые из них:

- `math` - математические функции
- `random` - генерация случайных чисел
- `os` - работа с операционной системой (_файлы, директории и т.д._)
- `datetime` - работа с временем и датами
- `re` - работа с регулярными выражениями
- `json` - работа с форматом данных JSON

Импортировать эти модули можно с помощью ключевого слова `import`, как и любой другой модуль. Например, чтобы использовать функции для работы с файлами из модуля os, нужно импортировать его так:

Модуль Math. Основные методы:

1. **math.ceil(x)** - округляет значение x до ближайшего большего целого числа.
2. **math.floor(x)** - округляет значение x до ближайшего меньшего целого числа.
3. **math.sqrt(x)** - возвращает квадратный корень из x.
4. **math.exp(x)** - возвращает экспоненту x (e в степени x), где e - число Эйлера (приблизительно 2,71828).
5. **math.log(x)** - возвращает натуральный логарифм x (с основанием e).
6. **math.log10(x)** - возвращает десятичный логарифм x (с основанием 10).
7. **math.pow(x, y)** - возвращает x в степени y.
8. **math.pi** - константа, которая представляет собой число π (приблизительно 3,14159).
9. **math.sin(x)** - возвращает синус x (x в радианах).
10. **math.cos(x)** - возвращает косинус x (x в радианах).
11. **math.tan(x)** - возвращает тангенс x (x в радианах).

Это только некоторые из методов, доступных в модуле Math. Проверьте документацию Python, чтобы получить полный список функций и описания их использования.

Модуль OS. Основные методы:

1. **os.getcwd()** - возвращает текущую рабочую директорию.
2. **os.chdir(path)** - изменяет текущую рабочую директорию на path.
3. **os.listdir(path)** - возвращает список файлов и директорий в директории, указанной в path.
4. **os.mkdir(path)** - создает директорию с именем path.
5. **os.makedirs(path)** - создает директории в пути path.
6. **os.remove(file)** - удаляет файл с именем file.
7. **os.rmdir(path)** - удаляет директорию с именем path.
8. **os.removedirs(path)** - удаляет директории в пути path.
9. **os.rename(src, dst)** - переименовывает файл или директорию с именем src на имя dst.
10. **os.path.abspath(path)** - возвращает абсолютный путь к файлу или директории.
11. **os.path.exists(path)** - проверяет, существует ли файл или директория с путем path.
12. **os.path.isdir(path)** - проверяет, является ли путь path директорией.
13. **os.path.isfile(path)** - проверяет, является ли путь path файлом.
14. **os.system(command)** - выполняет команду command в командной строке.

Модуль Random. Основные методы:

1. **randint(a, b)** - возвращает случайное целое число из диапазона [a, b], включая границы.
2. **choice(seq)** - случайно выбирает элемент из последовательности seq.
3. **shuffle(seq)** - перемешивает элементы последовательности seq в случайном порядке.
4. **random()** - возвращает случайное число с плавающей запятой в диапазоне [0.0, 1.0).
5. **randrange([start], stop[, step])** - возвращает случайное число из диапазона range([start], stop, [step]). Если указан только один аргумент, то начальное значение принимается за 0 и шаг за 1.

Модуль DateTime. Основные методы:

1. **now()** - возвращает текущую дату и время в объекте типа datetime.
2. **date()**- возвращает дату в объекте типа date.
3. **time()** - возвращает время в объекте типа time.
4. **strftime(format)** - преобразует объект datetime в строку в соответствии с форматом, указанным в аргументе format.
5. **strptime(date_string, format)** - преобразует строку, содержащую дату и время, в объект datetime в соответствии с форматом, указанным в аргументе format.

### 7.3 Установка сторонних библиотек

В Python существует огромное количество сторонних библиотек, которые расширяют возможности языка. Чтобы использовать эти библиотеки, их нужно сначала установить.

Для установки библиотек используется менеджер пакетов `pip`, который поставляется вместе с Python. Для установки библиотеки нужно выполнить команду:

```python
pip install название_библиотеки
```

Например, чтобы установить библиотеку requests для работы с `HTTP-запросами`, нужно выполнить команду:

```python
pip install requests
```

После этого можно использовать функции и классы из библиотеки. Например, чтобы отправить `HTTP-запрос` на сервер и получить ответ, можно использовать функцию `requests.get()`:

```python
import requests

resp = requests.get('https://www.python.org/')
print(resp.status_code)
```

Эта программа отправляет `GET-запрос` на сайт python.org и выводит на экран код ответа сервера. В данном случае он должен быть равен 200, что означает успешное выполнение запроса.

### 7.4 Telebot (сторонний модуль - установка).
Для установки стороннего модуля Telebot вам нужно выполнить следующие шаги:

1. Проверить что установлен Python.

2. Открыть командную строку (cmd). На Windows можно открыть ее, нажав Win+R и набрав cmd.

3. Установить Telebot при помощи команды pip install telebot:

```python
pip install telebot
```

4. Если все прошло успешно, то вы можете начать использовать Telebot в своих Python проектах. Например, вот простой код, который отправляет приветственное сообщение через Telebot:

```python
import telebot

bot = telebot.TeleBot("your_token_here")

@bot.message_handler(commands=['start'])
def send_welcome(message):
    bot.reply_to(message, "Привет, я бот!")

bot.polling(True)
```

5. Чтобы получить токен Telebot, нужно зарегистрировать своего бота в Telegram. Для этого нужно написать сообщение @BotFather в Telegram и следовать инструкциям.

Вот и все! У вас есть все необходимые инструменты, чтобы использовать Telebot в своих проектах на Python.

(основные) Методы telebot:

1. **bot.polling** - метод, который опрашивает сервер Telegram на наличие новых сообщений для бота;
2. **bot.send_message** - метод, который отправляет текстовое сообщение;
3. **bot.send_photo** - метод, который отправляет фото;
4. **bot.send_audio** - метод, который отправляет аудиофайл;
5. **bot.send_document** - метод, который отправляет документ;
6. **bot.send_location** - метод, который отправляет координаты местоположения;
7. **bot.send_venue** - метод, который отправляет информацию о месте;
8. **bot.send_chat_action** - метод, который отображает "действие" пользователя на несколько секунд (например, "набирает сообщение");
9. **bot.get_updates** - метод, который возвращает список актуальных обновлений (сообщений) для бота;
10. **bot.inline_query** - метод, который обрабатывает встроенные запросы (inline queries), т.е. пользовательский запрос, который работает в любом чате по нажатию на кнопку "@" и возвращающий результаты непосредственно в чат;
11. **bot.edit_message_text** - метод, который позволяет изменять текст сообщения, уже отправленного пользователю;
12. **bot.delete_message** - метод, который удаляет сообщение, уже отправленное пользователю.

### 7.5 Что такое база данных? (основные понятия и термины).

**База данных (БД)** - это специальное место, где хранятся информация и данные. Давайте представим себе большой шкаф, в котором лежат папки с информацией.

Внутри базы данных есть **таблицы**, как _листы в тетради_. В таблицах данные организованы в **строки** и **столбцы**. Каждая **строка** - это запись о чем-то, а **столбцы** - это категории информации.

**Запись** - это какая-то информация о чем-то конкретном. Например, если база данных о книгах, то каждая запись может представлять собой информацию о одной книге. **Атрибут** - это какое-то свойство или информация о записи. Например, если у нас есть таблица с информацией о книгах, то атрибутами могут быть _"Название книги"_, _"Автор"_ и _"Год выпуска"_.

**Первичный ключ (Primary Key)** - это как уникальный шифр или номер каждой записи. Он позволяет легко находить нужную запись в базе данных.

**SQL** - это специальный язык, который используется для работы с базами данных (БД). Это как инструкции или команды, которые говорят базе данных, что делать с данными. **СУБД (Система Управления Базами Данных)**- это как директор или управляющий базой данных. Она следит за тем, чтобы данные были хорошо организованы и доступны.

**Нормализация** - это правила, которые помогают хранить данные аккуратно и в порядке. **Денормализация** - это как сделать данные более доступными и быстрыми, но менее аккуратными.

### 7.6 Введение в SQLite. Как создать таблицу в базе?

**SQLite** - это легковесная и встроенная **СУБД** (_Система Управления Базами Данных_), которая позволяет создавать и управлять базами данных в приложениях Python и других языках программирования.

_Установка библиотеки через CMD:_

        pip install sqlite3

_Импорт библиотеки в код программы_

```python
import sqlite3
```

Затем нужно создать **соединение** с базой данных. Если база данных не существует, она будет автоматически создана. В примере ниже создадим базу данных с именем "mydatabase.db":

```python
conn = sqlite3.connect("mydatabase.db")
```

Далее нужно создать объект курсора. **Курсор** - это объект, который позволяет вам выполнить **SQL-запросы** к базе данных. Создайте курсор с помощью метода **cursor()**:

```python
cursor = conn.cursor()
```

Теперь вы можете создать таблицу в базе данных с помощью SQL-запроса. В примере ниже создадим таблицу "users" с двумя полями: "id" и "name":

```python
cursor.execute('''CREATE TABLE users
                  (id INT PRIMARY KEY NOT NULL,
                   name TEXT NOT NULL)''')
```

Этот запрос создаст таблицу **"users"** с двумя столбцами: "id" и "name". Столбец **"id"** будет содержать целые числа, и он является первичным ключом (PRIMARY KEY), что означает, что каждая запись в таблице будет иметь уникальный идентификатор. Столбец **"name"** будет содержать текстовые данные.

После создания таблицы, не забудьте **сохранить изменения** в базе данных и закрыть соединение:

```python
conn.commit()
conn.close()
```

Теперь у вас есть база данных SQLite с созданной таблицей "users". Вы можете использовать эту таблицу для хранения данных и выполнять различные операции с ней, такие как добавление, обновление и извлечение данных.

### 7.7-7.8 Добавление, удаление и др методы работы с базой данных.

#### 7.7.1 Добавление данных

Для добавления данных в таблицу используется оператор **INSERT INTO**. Например, допустим, вы хотите добавить нового пользователя в таблицу "users":

```python
import sqlite3

conn = sqlite3.connect("mydatabase.db")
cursor = conn.cursor()

# Добавление нового пользователя
cursor.execute("INSERT INTO users (id, name) VALUES (1, 'John')")

conn.commit()
conn.close()
```

#### 7.7.2 Удаление данных из таблицы

Для удаления данных используется оператор **DELETE**. Например, допустим, вы хотите удалить пользователя с определенным идентификатором из таблицы "users":

```python
import sqlite3

conn = sqlite3.connect("mydatabase.db")
cursor = conn.cursor()

# Удаление пользователя с определенным ID
user_id_to_delete = 1
cursor.execute("DELETE FROM users WHERE id = ?", (user_id_to_delete,))

conn.commit()
conn.close()
```

#### 7.7.3 Обновление данных в таблице

Для обновления данных используется оператор **UPDATE**. Например, допустим, вы хотите изменить имя пользователя с определенным идентификатором:

```python
import sqlite3

conn = sqlite3.connect("mydatabase.db")
cursor = conn.cursor()

# Обновление имени пользователя с определенным ID
new_name = "Jane"
user_id_to_update = 1
cursor.execute("UPDATE users SET name = ? WHERE id = ?", (new_name, user_id_to_update))

conn.commit()
conn.close()
```

#### 7.7.4 Извлечение данных из таблицы

Для извлечения данных используется оператор **SELECT**. Например, допустим, вы хотите получить список всех пользователей:

```python

import sqlite3

conn = sqlite3.connect("mydatabase.db")
cursor = conn.cursor()

# Извлечение всех пользователей
cursor.execute("SELECT * FROM users")
users = cursor.fetchall()

for user in users:
    print(user)

conn.close()
```

#### 7.7.5 Извлечение данных с условием из таблицы

Чтобы получить данные, удовлетворяющие **определенным условиям**, используйте оператор **SELECT** с условием **WHERE**. Например, чтобы получить список пользователей с именем "John", вы можете сделать следующее:

```python
import sqlite3

conn = sqlite3.connect("mydatabase.db")
cursor = conn.cursor()

# Извлечение пользователей с именем "John"
name_to_find = "John"
cursor.execute("SELECT * FROM users WHERE name = ?", (name_to_find,))
johns = cursor.fetchall()

for user in johns:
    print(user)

conn.close()
```

#### 7.7.6 Операции с множеством записей

Вы можете добавлять, обновлять и удалять множество записей одновременно, используя операторы **INSERT INTO**, **UPDATE** и **DELETE**. Например, чтобы добавить несколько пользователей сразу:

```python
# ...
users_to_insert = [
    (2, 'Alice'),
    (3, 'Bob'),
    (4, 'Eve')
]

cursor.executemany("INSERT INTO users (id, name) VALUES (?, ?)", users_to_insert)
```

Этот код добавит несколько пользователей в таблицу "users".


### 7.9 Модуль работы с изображениями (Pillow)

#### Pillow Модуль

**Pillow (Python Imaging Library, fork)** - это библиотека Python для работы с изображениями. Она предоставляет множество функций для открытия, обработки, редактирования и сохранения изображений в различных форматах. 

_Установка:_

        pip install Pillow

Чтобы открыть изображение, используйте функцию **Image.open()**. Вот пример:

```python

from PIL import Image

# Открываем изображение
img = Image.open('example.jpg')
```

#### Pillow основные операции

Изменение размера изображения:

```python
new_img = img.resize((width, height))
```

Обрезка изображения:

```python
cropped_img = img.crop((left, top, right, bottom))
```

Поворот изображения:

```python
rotated_img = img.rotate(degrees)
```

Изменение яркости и контраста:

```python
from PIL import ImageEnhance

enhancer = ImageEnhance.Brightness(img)
brighter_img = enhancer.enhance(factor)  # factor > 1 увеличит яркость, < 1 уменьшит
enhancer = ImageEnhance.Contrast(img)
higher_contrast_img = enhancer.enhance(factor)  # factor > 1 увеличит контраст, < 1 уменьшит
```

Сохранение изображения:
```python
img.save('output.jpg', 'JPEG')
```

Отображение изображения:
```python
img.show()
```

Создание нового изображения:

**Pillow** позволяет создавать новые изображения с помощью модуля Image.new(). Например, чтобы создать пустое изображение с белым фоном:

```python
from PIL import Image

width, height = 800, 600
white_bg = Image.new('RGB', (width, height), 'white')
```

[Pillow documentation](https://pillow.readthedocs.io/en/stable/index.html)


### 7.10 Модуль работы с графиками (Matplotlib)

#### Matplotlib Модуль

**Matplotlib** - это библиотека Python для создания различных графиков и визуализации данных. Она позволяет создавать графику для анализа данных, построения графиков для научных и инженерных задач, а также для создания и кастомизации графических элементов.

_Установка:_

        pip install matplotlib

_Импортируйте Matplotlib в свой скрипт:_

```python
import matplotlib.pyplot as plt
```

#### Разные графики

**Matplotlib** позволяет создавать различные типы графиков, такие как линейные, столбчатые, точечные и др. Начнем с создания простого графика. Вот пример создания линейного графика:

```python
# Данные для графика
x = [1, 2, 3, 4, 5]
y = [10, 12, 5, 8, 7]

# Создание линейного графика
plt.plot(x, y)

# Добавление подписей к осям и заголовка
plt.xlabel('X-ось')
plt.ylabel('Y-ось')
plt.title('Пример линейного графика')

# Отображение графика
plt.show()
```

Столбчатая диаграмма (бар-график):

```python
categories = ['A', 'B', 'C', 'D', 'E']
values = [25, 30, 10, 15, 20]

plt.bar(categories, values)
plt.xlabel('Категории')
plt.ylabel('Значения')
plt.title('Пример столбчатой диаграммы')
plt.show()
```

Точечная диаграмма (scatter plot):

```python
x = [1, 2, 3, 4, 5]
y = [10, 12, 5, 8, 7]

plt.scatter(x, y)
plt.xlabel('X-ось')
plt.ylabel('Y-ось')
plt.title('Пример точечной диаграммы')
plt.show()
```

Сохранение графика:

```python
plt.savefig('my_plot.png')
```

Matplotlib предоставляет множество опций для настройки графиков, включая цвета, стили линий, маркеры и многое другое.

[Matplotlib documentation](https://matplotlib.org/stable/users/index.html)
